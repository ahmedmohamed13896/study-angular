<div class="container-fluid mw-1000 " >
  <!-- {{userForm.value | json}}
  <hr>
  {{userModel | json}} -->
  <div class="alert alert-danger" *ngIf="errorMessage">
    {{errorMessage}}
  </div>
  <form class="py-4"  #userForm="ngForm" novalidate (ngSubmit)="submitForm()" *ngIf="!submited">
    <div class="mb-3">
        <label for="name" class="form-label" >Name</label>
        <input type="text" name="username" pattern="^[A-Z]|[a-z]|[0-9]$" required minlength="3" [ngClass]="{'is-invalid': username.invalid && username.touched}" #username="ngModel" class="form-control" placeholder="Name" aria-label="name" id="name"  [(ngModel)]="userModel.name">
        <div class="invalid-feedback" *ngIf="username.errors && (username.invalid || username.touched)">
            <span *ngIf="username.errors['required']">Filed is required</span>
            <span *ngIf="username.errors['pattern']">Please add only chars and digits</span>
            <span *ngIf="username.errors['minlength']">At least 3 chars or digits</span>
        </div>
    </div>
    <div class="mb-3">
      <label for="email" class="form-label" >Email address</label>
      <input type="email" name="email" class="form-control" id="email" required pattern="^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$" #email="ngModel" placeholder="name@example.com" [ngClass]="{'is-invalid': email.invalid && email.touched}"  [(ngModel)]="userModel.email">
      <div class="invalid-feedback" *ngIf="email.errors && (email.invalid || email.touched)">
        <span *ngIf="email.errors['required']">Filed is required</span>
        <span *ngIf="email.errors['pattern']">Invalid format for Email</span>
      </div>
    </div>
    <div class="mb-3">
      <label for="password" class="form-label">Password</label>
      <input type="password" name="password" class="form-control" minlength="8" pattern="^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$" required id="password" #password="ngModel" [ngClass]="{'is-invalid': password.invalid && password.touched}"  [(ngModel)]="userModel.password">
      <div class="invalid-feedback" *ngIf="password.errors && (password.invalid || password.touched)">
        <span *ngIf="password.errors['required']">Filed is required</span>
        <span *ngIf="password.errors['pattern']">Password must  contain at least 8 characters, at least one number and both lower and uppercase letters and special characters</span>
      </div>
    </div>
    <div class="mb-3">
      <label for="inputTopic" class="form-label">Topic</label>
      <select (blur)="validateTopic(topics.value)" (change)="validateTopic(topics.value)" id="inputTopic" class="form-select" [class.is-invalid]="topicHasError && topics.touched " required name="topic" #topics="ngModel" ngModel>
        <option selected value="">Please choose a topic.</option>
        <option *ngFor="let topic of topicsList;" [value]="topic">{{topic}}</option>
      </select>
      <div class="invalid-feedback" *ngIf="topicHasError || topics.touched" >
          Filed is required
      </div>
    </div>



    <button  [disabled]="userForm.form.invalid"  class="btn btn-primary">Register</button>

  </form>

  <h2 class="text-success text-center p-5" *ngIf="submited">
    Form submited
  </h2>
</div>
